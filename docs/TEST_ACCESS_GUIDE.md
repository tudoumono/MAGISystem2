# テストページアクセスガイド

**更新日**: 2025年10月29日  
**対象**: MAGI Decision System 開発者

---

## 🎯 概要

ダッシュボードからすべてのテストページに簡単にアクセスできるようになりました。
デバッグモードを有効にすると、より詳細なテストツールが表示されます。

---

## 🔧 デバッグモードの使い方

### 有効化方法

1. ダッシュボード（`/dashboard`）にアクセス
2. ヘッダー右上の「🔧 デバッグON」ボタンをクリック
3. デバッグパネルが表示されます

### 無効化方法

- 「🔧 デバッグOFF」ボタンをクリック
- 簡易版のテスト環境セクションに戻ります

---

## 📍 テストページ一覧

### 基本テストページ

| ページ | URL | 説明 | アクセス方法 |
|--------|-----|------|-------------|
| UI基本機能 | `/test` | 会話UI、メッセージ表示の基本機能 | ダッシュボード → テスト環境 |
| データ統合 | `/test/data` | Amplify Data、GraphQL API | ダッシュボード → テスト環境 |
| エージェント統合 | `/test/agents` | MAGI 3賢者エージェント | ダッシュボード → テスト環境 |
| 統合テスト | `/test/integration` | ストリーミング、トレース | ダッシュボード → テスト環境 |

### デバッグモード限定

| ページ | URL | 説明 | アクセス方法 |
|--------|-----|------|-------------|
| MAGIストリーム | `/test/integration/magi-stream` | リアルタイム実行テスト | デバッグパネル → MAGIストリーム |
| MAGIトレース | `/test/integration/magi-trace` | 推論過程の可視化 | デバッグパネル → MAGIトレース |
| 本番環境テスト | `/test/integration/magi-production` | Production統合テスト | デバッグパネル → 本番環境 |
| HTMLテスト | `/tests/fixtures/test-stream.html` | スタンドアロンテスト | デバッグパネル → HTMLテスト |

---

## 🚀 クイックアクセス

### ダッシュボードから

```
/dashboard
  ↓ デバッグON
  ↓
デバッグパネル表示
  ↓
各テストページへワンクリック
```

### 直接URL

開発中は以下のURLで直接アクセス可能：

```bash
# 基本テスト
http://localhost:3000/test
http://localhost:3000/test/data
http://localhost:3000/test/agents
http://localhost:3000/test/integration

# 統合テスト
http://localhost:3000/test/integration/magi-stream
http://localhost:3000/test/integration/magi-trace
http://localhost:3000/test/integration/magi-production

# HTMLテスト
http://localhost:3000/tests/fixtures/test-stream.html
```

---

## 🎨 デバッグパネルの機能

### テストページへのクイックアクセス

8つのテストページにワンクリックでアクセス：

1. **🎨 UI基本機能** - 会話UI、メッセージ表示
2. **💾 データ統合** - Amplify Data, GraphQL
3. **🤖 エージェント** - MAGI 3賢者テスト
4. **🔗 統合テスト** - ストリーミング、トレース
5. **🌊 MAGIストリーム** - リアルタイム実行テスト
6. **🔍 MAGIトレース** - 推論過程の可視化
7. **🚀 本番環境** - Production統合テスト
8. **📄 HTMLテスト** - スタンドアロンテスト

### クイックアクション

- **API Health Check** - APIの稼働状況を確認
- **環境情報を表示** - 現在の環境変数とユーザー情報をコンソールに出力

---

## 📊 テストページの構造

```
/test (UI基本機能)
├── /data (データ統合)
│   ├── /amplify-models
│   ├── /conversation
│   └── /models-check
├── /agents (エージェント統合)
│   └── /magi
├── /integration (統合テスト)
│   ├── /magi-stream ⭐ よく使う
│   ├── /magi-trace ⭐ よく使う
│   ├── /magi-production ⭐ よく使う
│   └── /production
└── /trace (トレース機能)
```

---

## 🔍 各テストページの用途

### 1. UI基本機能 (`/test`)

**目的**: フロントエンドの基本機能テスト

**確認項目**:
- 会話一覧の表示
- 新規会話作成（楽観的更新）
- 会話の編集・削除
- 検索・フィルタリング
- エラーハンドリング

**使用タイミング**:
- UIコンポーネントの動作確認
- 状態管理のテスト
- ユーザー操作のテスト

---

### 2. データ統合 (`/test/data`)

**目的**: Amplify Dataとの統合テスト

**確認項目**:
- GraphQL APIの動作
- データモデルの整合性
- CRUD操作の確認
- リアルタイム更新

**使用タイミング**:
- データスキーマ変更後
- GraphQL APIの動作確認
- データ永続化のテスト

---

### 3. エージェント統合 (`/test/agents`)

**目的**: MAGI 3賢者エージェントのテスト

**確認項目**:
- エージェント実行
- 応答の取得
- エラーハンドリング

**使用タイミング**:
- エージェントロジック変更後
- Bedrock統合のテスト
- エージェント応答の確認

---

### 4. MAGIストリーム (`/test/integration/magi-stream`) ⭐

**目的**: リアルタイムストリーミングのテスト

**確認項目**:
- Server-Sent Eventsの動作
- 段階的なコンテンツ配信
- エージェント実行の可視化
- エラーハンドリング

**使用タイミング**:
- ストリーミングAPI変更後
- リアルタイム更新のテスト
- **最も頻繁に使用するテストページ**

---

### 5. MAGIトレース (`/test/integration/magi-trace`)

**目的**: 推論過程の可視化テスト

**確認項目**:
- トレースステップの表示
- 実行時間の計測
- エラー追跡

**使用タイミング**:
- デバッグ時
- パフォーマンス分析
- エージェント動作の詳細確認

---

### 6. 本番環境テスト (`/test/integration/magi-production`)

**目的**: 本番環境での統合テスト

**確認項目**:
- 実際のAWS Bedrock連携
- Lambda関数の動作
- 認証・認可の確認

**使用タイミング**:
- デプロイ前の最終確認
- 本番環境の動作検証
- パフォーマンステスト

---

## 💡 使用例

### シナリオ1: 新機能の開発

```
1. UI基本機能でコンポーネントをテスト
   ↓
2. データ統合でAPI連携を確認
   ↓
3. MAGIストリームで実際の動作を確認
   ↓
4. 本番環境テストで最終確認
```

### シナリオ2: バグ修正

```
1. MAGIトレースでエラー箇所を特定
   ↓
2. 該当するテストページで修正を確認
   ↓
3. MAGIストリームで全体動作を確認
```

### シナリオ3: パフォーマンス改善

```
1. MAGIトレースで実行時間を計測
   ↓
2. 改善後、再度計測
   ↓
3. 本番環境テストで実環境での動作を確認
```

---

## 🎯 推奨ワークフロー

### 日常開発

1. ダッシュボードにアクセス
2. デバッグモードON
3. 該当するテストページで動作確認
4. 問題があればMAGIトレースで詳細確認

### デプロイ前

1. すべてのテストページで動作確認
2. 本番環境テストで最終確認
3. API Health Checkで稼働状況確認
4. 環境情報を確認してデプロイ

---

## 🔗 関連ドキュメント

- [TEST_STRUCTURE.md](./TEST_STRUCTURE.md) - テスト構造の詳細
- [DEVELOPMENT_GUIDE.md](./DEVELOPMENT_GUIDE.md) - 開発ガイド
- [SYSTEM_DIAGNOSIS.md](./SYSTEM_DIAGNOSIS.md) - システム診断レポート
- [SECURITY_FIXES.md](./SECURITY_FIXES.md) - セキュリティ修正レポート

---

## 📝 Tips

### ブックマーク推奨

よく使うページをブラウザにブックマーク：

```
📌 ダッシュボード: http://localhost:3000/dashboard
📌 MAGIストリーム: http://localhost:3000/test/integration/magi-stream
📌 MAGIトレース: http://localhost:3000/test/integration/magi-trace
```

### キーボードショートカット

ブラウザの開発者ツールと併用：

- `F12` - 開発者ツールを開く
- `Ctrl+Shift+C` - 要素を検査
- `Ctrl+Shift+J` - コンソールを開く

### デバッグのコツ

1. **コンソールを常に開く** - エラーやログを即座に確認
2. **ネットワークタブを活用** - API呼び出しを監視
3. **環境情報を確認** - 想定外の環境で動作していないか確認

---

## 🎉 まとめ

ダッシュボードのデバッグモードを使えば、すべてのテストページに簡単にアクセスできます。

**最も重要なテストページ**:
1. 🌊 MAGIストリーム - 日常的な動作確認
2. 🔍 MAGIトレース - デバッグ時
3. 🚀 本番環境テスト - デプロイ前

効率的なテストで、高品質な開発を実現しましょう！

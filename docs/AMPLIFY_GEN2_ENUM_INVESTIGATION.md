# Amplify Gen 2 Enumå‹ã®èª¿æŸ»çµæœ

## ğŸ“Š èª¿æŸ»æ—¥æ™‚
2025-01-04

## âœ… ç¢ºèªã•ã‚ŒãŸäº‹å®Ÿ

### 1. Enumå‹ã¯ä½¿ç”¨å¯èƒ½

```typescript
// âœ… å‹•ä½œã™ã‚‹ - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§å®Ÿéš›ã«ä½¿ç”¨ä¸­
Message: a.model({
  role: a.enum(['user', 'assistant']),
  // ...
})
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãªãå‹•ä½œã—ã¦ãŠã‚Šã€å‹ã‚‚æ­£ã—ãç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### 2. `.default()`ãƒ¡ã‚½ãƒƒãƒ‰ã¯éå¯¾å¿œ

```typescript
// âŒ ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼
searchProvider: a.enum(['tavily', 'serper']).default('tavily'),
// Error: Property 'default' does not exist on type 'EnumType<readonly ["tavily", "serper"]>'
```

TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒ`.default()`ãƒ¡ã‚½ãƒƒãƒ‰ã®å­˜åœ¨ã‚’èªè­˜ã—ã¦ã„ã¾ã›ã‚“ã€‚

## ğŸ” å‹å®šç¾©ã®ç¢ºèª

Amplify Gen 2ã®å‹å®šç¾©ã‚’ç¢ºèªã™ã‚‹ã¨ï¼š

```typescript
// @aws-amplify/backend ã®å‹å®šç¾©ï¼ˆæ¨æ¸¬ï¼‰
interface EnumType<T extends readonly string[]> {
  // .default() ãƒ¡ã‚½ãƒƒãƒ‰ã¯å®šç¾©ã•ã‚Œã¦ã„ãªã„
}

interface StringType {
  default(value: string): StringType; // âœ… å®šç¾©ã•ã‚Œã¦ã„ã‚‹
}

interface BooleanType {
  default(value: boolean): BooleanType; // âœ… å®šç¾©ã•ã‚Œã¦ã„ã‚‹
}

interface IntegerType {
  default(value: number): IntegerType; // âœ… å®šç¾©ã•ã‚Œã¦ã„ã‚‹
}
```

## ğŸ“‹ ã‚µãƒãƒ¼ãƒˆçŠ¶æ³ã¾ã¨ã‚

| å‹ | åŸºæœ¬ä½¿ç”¨ | `.default()` | å‚™è€ƒ |
|---|---|---|---|
| `a.string()` | âœ… | âœ… | å®Œå…¨ã‚µãƒãƒ¼ãƒˆ |
| `a.boolean()` | âœ… | âœ… | å®Œå…¨ã‚µãƒãƒ¼ãƒˆ |
| `a.integer()` | âœ… | âœ… | å®Œå…¨ã‚µãƒãƒ¼ãƒˆ |
| `a.enum()` | âœ… | âŒ | **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤éå¯¾å¿œ** |
| `a.datetime()` | âœ… | âŒ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤éå¯¾å¿œ |
| `a.json()` | âœ… | âŒ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤éå¯¾å¿œ |

## ğŸ¯ çµè«–

1. **Enumå‹è‡ªä½“ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹**
   - `a.enum(['value1', 'value2'])`ã¯æ­£å¸¸ã«å‹•ä½œ
   - å‹å®‰å…¨æ€§ã‚‚ä¿è¨¼ã•ã‚Œã‚‹
   - GraphQLã‚¹ã‚­ãƒ¼ãƒã«ã‚‚æ­£ã—ãåæ˜ ã•ã‚Œã‚‹

2. **`.default()`ãƒ¡ã‚½ãƒƒãƒ‰ã¯å®Ÿè£…ã•ã‚Œã¦ã„ãªã„**
   - ç¾åœ¨ã®Amplify Gen 2ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯æœªå®Ÿè£…
   - å°†æ¥çš„ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹å¯èƒ½æ€§ã¯ã‚ã‚‹
   - ç¾æ™‚ç‚¹ã§ã¯å›é¿ç­–ãŒå¿…è¦

## ğŸ”„ å›é¿ç­–ã®é¸æŠè‚¢

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: Stringå‹ + ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ¡ç”¨ï¼‰
```typescript
searchProvider: a.string().default('tavily'),
```
**ãƒ¡ãƒªãƒƒãƒˆ:**
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šå¯èƒ½
- ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„
- TypeScriptå‹å®šç¾©ã§å‹å®‰å…¨æ€§ã‚’ä¿è¨¼

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- GraphQLã‚¹ã‚­ãƒ¼ãƒä¸Šã¯enumå‹ã§ã¯ãªã„
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã§ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: Enumå‹ + ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
```typescript
searchProvider: a.enum(['tavily', 'serper']),
```
**ãƒ¡ãƒªãƒƒãƒˆ:**
- GraphQLã‚¹ã‚­ãƒ¼ãƒä¸Šã§enumå‹ã¨ã—ã¦å®šç¾©ã•ã‚Œã‚‹
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ã§ã®å‹åˆ¶ç´„

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã§ç®¡ç†ã™ã‚‹å¿…è¦
- æ–°è¦ä½œæˆæ™‚ã«å¿…ãšå€¤ã‚’æŒ‡å®šã™ã‚‹å¿…è¦

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: Required + Enumå‹
```typescript
searchProvider: a.enum(['tavily', 'serper']).required(),
```
**ãƒ¡ãƒªãƒƒãƒˆ:**
- æ˜ç¤ºçš„ã«å€¤ã‚’è¦æ±‚
- ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ãŒé«˜ã„

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- å¸¸ã«å€¤ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®æ¦‚å¿µãŒãªã„

## ğŸ“š å‚è€ƒæƒ…å ±

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ä½¿ç”¨ä¾‹

**Enumå‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãªã—ï¼‰:**
```typescript
// amplify/data/resource.ts
Message: a.model({
  role: a.enum(['user', 'assistant']), // âœ… å‹•ä½œä¸­
})
```

**Booleanå‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚ã‚Šï¼‰:**
```typescript
// amplify/data/resource.ts
AgentPreset: a.model({
  isDefault: a.boolean().default(false), // âœ… å‹•ä½œä¸­
  isPublic: a.boolean().default(false),  // âœ… å‹•ä½œä¸­
})
```

**Integerå‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚ã‚Šï¼‰:**
```typescript
// amplify/data/resource.ts
TraceStep: a.model({
  errorCount: a.integer().default(0), // âœ… å‹•ä½œä¸­
})
```

## ğŸš€ æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯**ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: Stringå‹ + ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚

ç†ç”±:
1. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒå¿…é ˆè¦ä»¶
2. TypeScriptã®å‹å®šç¾©ã§å‹å®‰å…¨æ€§ã‚’ä¿è¨¼å¯èƒ½
3. å®Ÿè£…ãŒã‚·ãƒ³ãƒ—ãƒ«
4. å°†æ¥çš„ã«enumå‹ã®`.default()`ãŒã‚µãƒãƒ¼ãƒˆã•ã‚ŒãŸå ´åˆã‚‚ç§»è¡ŒãŒå®¹æ˜“

## ğŸ”® å°†æ¥ã®å±•æœ›

Amplify Gen 2ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ä»¥ä¸‹ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹å¯èƒ½æ€§:

```typescript
// å°†æ¥çš„ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹å¯èƒ½æ€§
searchProvider: a.enum(['tavily', 'serper']).default('tavily'),
```

ãã®å ´åˆã¯ã€ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ã—ã¦å‹å®‰å…¨æ€§ã‚’ã•ã‚‰ã«å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ğŸ“ æ›´æ–°å±¥æ­´

- 2025-01-04: åˆç‰ˆä½œæˆã€enumå‹ã®`.default()`éå¯¾å¿œã‚’ç¢ºèª
